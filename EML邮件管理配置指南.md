# EMLé‚®ä»¶ç®¡ç†ç³»ç»Ÿé…ç½®æŒ‡å—

## æ¦‚è¿°
EMLé‚®ä»¶ç®¡ç†ç³»ç»Ÿå·²ç»å¼€å‘å®Œæˆï¼ŒåŒ…å«å‰ç«¯ç•Œé¢å’Œåç«¯æ¥å£ã€‚ç°åœ¨éœ€è¦é…ç½®èœå•æƒé™æ¥æ˜¾ç¤ºè¯¥åŠŸèƒ½æ¨¡å—ã€‚

## å‰ç«¯ç»„ä»¶å·²å°±ç»ª
âœ… **ç»„ä»¶è·¯å¾„**ï¼š
- é‚®ä»¶ç®¡ç†åˆ—è¡¨ï¼š`src/views/eml/EmailManagement.vue`
- é‚®ä»¶è¯¦æƒ…é¡µé¢ï¼š`src/views/eml/EmailDetail.vue`
- ç›¸å…³å·¥å…·å‡½æ•°ï¼š`src/utils/eml.ts`
- ç±»å‹å®šä¹‰ï¼š`src/types/eml/`

âœ… **è·¯ç”±é…ç½®**ï¼šå·²æ·»åŠ åˆ° `src/router/modules/remaining.ts`

## é…ç½®æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œæ•°æ®åº“èœå•é…ç½®
è¿è¡ŒSQLè„šæœ¬ `sql/mysql/eml_email_menu_config.sql` æ¥æ·»åŠ èœå•ï¼š

```sql
-- 1. æŸ¥è¯¢ç³»ç»Ÿç®¡ç†èœå•ID
SELECT id FROM system_menu WHERE name = 'ç³»ç»Ÿç®¡ç†' AND deleted = 0;

-- 2. æ·»åŠ EMLé‚®ä»¶ç®¡ç†ä¸»èœå•ï¼ˆå°†parent_idæ›¿æ¢ä¸ºä¸Šä¸€æ­¥æŸ¥åˆ°çš„IDï¼‰
INSERT INTO system_menu (
    name, permission, type, sort, parent_id, path, icon, component, component_name, 
    status, visible, keep_alive, always_show, creator, create_time, updater, update_time, deleted
) VALUES (
    'EMLé‚®ä»¶ç®¡ç†', '', 1, 35, 1, 'eml', 'ep:message', '', '', 
    0, 1, 1, 1, '1', NOW(), '1', NOW(), 0
);

-- 3. æŸ¥è¯¢åˆšæ’å…¥çš„èœå•ID
SELECT id as 'EMLé‚®ä»¶ç®¡ç†èœå•ID' FROM system_menu WHERE name = 'EMLé‚®ä»¶ç®¡ç†' AND deleted = 0 ORDER BY id DESC LIMIT 1;

-- 4. æ·»åŠ å­èœå•ï¼ˆå°†parent_idæ›¿æ¢ä¸ºä¸Šä¸€æ­¥æŸ¥åˆ°çš„IDï¼‰
INSERT INTO system_menu (
    name, permission, type, sort, parent_id, path, icon, component, component_name, 
    status, visible, keep_alive, always_show, creator, create_time, updater, update_time, deleted
) VALUES (
    'é‚®ä»¶ç®¡ç†', 'system:eml:list', 2, 1, [EMLé‚®ä»¶ç®¡ç†èœå•ID], 'email-management', 'ep:message-box', 
    'eml/EmailManagement', 'EmailManagement', 0, 1, 1, 1, '1', NOW(), '1', NOW(), 0
);
```

### ç¬¬äºŒæ­¥ï¼šä¸ºè§’è‰²åˆ†é…æƒé™
å¦‚æœæ‚¨çš„ç”¨æˆ·ä¸æ˜¯è¶…çº§ç®¡ç†å‘˜ï¼Œéœ€è¦ä¸ºè§’è‰²åˆ†é…ç›¸åº”æƒé™ï¼š

1. ç™»å½•ç³»ç»Ÿç®¡ç†åå°
2. è¿›å…¥"ç³»ç»Ÿç®¡ç†" â†’ "è§’è‰²ç®¡ç†"
3. ç¼–è¾‘éœ€è¦ä½¿ç”¨è¯¥åŠŸèƒ½çš„è§’è‰²
4. åœ¨èœå•æƒé™ä¸­å‹¾é€‰"EMLé‚®ä»¶ç®¡ç†"ç›¸å…³æƒé™

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨å‰ç«¯é¡¹ç›®
```bash
cd yudao-ui-admin-vue3
pnpm install
pnpm dev
```

### ç¬¬å››æ­¥ï¼šéªŒè¯åŠŸèƒ½
1. é‡æ–°ç™»å½•ç³»ç»Ÿ
2. åœ¨å·¦ä¾§èœå•æ çš„"ç³»ç»Ÿç®¡ç†"ä¸‹åº”è¯¥èƒ½çœ‹åˆ°"EMLé‚®ä»¶ç®¡ç†"èœå•
3. ç‚¹å‡»è¿›å…¥é‚®ä»¶ç®¡ç†é¡µé¢

## åŠŸèƒ½ç‰¹æ€§

### ä¸»è¦åŠŸèƒ½
- âœ… EMLæ–‡ä»¶æ‰¹é‡å¯¼å…¥ï¼ˆZIPå‹ç¼©åŒ…ï¼‰
- âœ… é‚®ä»¶åˆ—è¡¨æŸ¥çœ‹å’Œæœç´¢
- âœ… é‚®ä»¶è¯¦æƒ…æŸ¥çœ‹
- âœ… é™„ä»¶ä¸‹è½½
- âœ… é‚®ä»¶æ ‡æ˜Ÿæ”¶è—
- âœ… æ‰¹é‡åˆ é™¤æ“ä½œ
- âœ… å¯¼å…¥å†å²è®°å½•

### æŠ€æœ¯æ¶æ„
- **å‰ç«¯**: Vue3 + Element Plus + TypeScript
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router
- **æƒé™**: åŸºäºèœå•çš„RBACæƒé™æ§åˆ¶

## æƒé™è¯´æ˜

| æƒé™æ ‡è¯† | æƒé™åç§° | è¯´æ˜ |
|---------|---------|------|
| `system:eml:list` | é‚®ä»¶åˆ—è¡¨ | æŸ¥çœ‹é‚®ä»¶åˆ—è¡¨é¡µé¢ |
| `system:eml:query` | é‚®ä»¶æŸ¥è¯¢ | æŸ¥è¯¢é‚®ä»¶è¯¦æƒ… |
| `system:eml:import` | é‚®ä»¶å¯¼å…¥ | ä¸Šä¼ å’Œå¯¼å…¥EMLæ–‡ä»¶ |
| `system:eml:star` | é‚®ä»¶æ˜Ÿæ ‡ | æ ‡è®°/å–æ¶ˆæ˜Ÿæ ‡ |
| `system:eml:delete` | é‚®ä»¶åˆ é™¤ | åˆ é™¤é‚®ä»¶ |
| `system:eml:download` | é™„ä»¶ä¸‹è½½ | ä¸‹è½½é‚®ä»¶é™„ä»¶ |

## èœå•ç»“æ„
```
ç³»ç»Ÿç®¡ç†
â””â”€â”€ EMLé‚®ä»¶ç®¡ç†
    â””â”€â”€ é‚®ä»¶ç®¡ç† (/eml/email-management)
        â”œâ”€â”€ é‚®ä»¶æŸ¥è¯¢
        â”œâ”€â”€ é‚®ä»¶å¯¼å…¥  
        â”œâ”€â”€ é‚®ä»¶æ˜Ÿæ ‡
        â”œâ”€â”€ é‚®ä»¶åˆ é™¤
        â””â”€â”€ é™„ä»¶ä¸‹è½½
```

## å¸¸è§é—®é¢˜

### Q: èœå•ä¸æ˜¾ç¤ºæ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®è®¤æ•°æ®åº“èœå•é…ç½®æ˜¯å¦æ­£ç¡®æ‰§è¡Œ
2. ç¡®è®¤å½“å‰ç”¨æˆ·è§’è‰²æ˜¯å¦æœ‰ç›¸åº”æƒé™
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åé‡æ–°ç™»å½•

### Q: é¡µé¢æŠ¥404é”™è¯¯ï¼Ÿ
A: ç¡®è®¤è·¯ç”±é…ç½®æ˜¯å¦æ­£ç¡®æ·»åŠ åˆ° `src/router/modules/remaining.ts`

### Q: æ²¡æœ‰æ“ä½œæŒ‰é’®æƒé™ï¼Ÿ
A: ç¡®è®¤æ“ä½œæŒ‰é’®çš„æƒé™é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œæ£€æŸ¥ `system_role_menu` è¡¨ä¸­çš„æƒé™åˆ†é…

## åç«¯æ¥å£
ç¡®ä¿åç«¯å·²å®ç°ä»¥ä¸‹æ¥å£ï¼š
- `POST /admin-api/system/email/upload-zip` - ä¸Šä¼ ZIPæ–‡ä»¶
- `GET /admin-api/system/email/page` - åˆ†é¡µæŸ¥è¯¢é‚®ä»¶
- `GET /admin-api/system/email/{id}` - è·å–é‚®ä»¶è¯¦æƒ…
- `PUT /admin-api/system/email/{id}/toggle-star` - åˆ‡æ¢æ˜Ÿæ ‡
- `DELETE /admin-api/system/email` - æ‰¹é‡åˆ é™¤é‚®ä»¶
- `GET /admin-api/system/email/attachment/{id}/download` - ä¸‹è½½é™„ä»¶

## æ€»ç»“
å®Œæˆä»¥ä¸Šé…ç½®åï¼ŒEMLé‚®ä»¶ç®¡ç†åŠŸèƒ½å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚å¦‚æœ‰é—®é¢˜è¯·æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯æˆ–è”ç³»å¼€å‘äººå‘˜ã€‚

---
**æ–¹æ€»ç‰›é€¼** ğŸš€ 